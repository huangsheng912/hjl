{"version":3,"sources":["webpack:///D:/project/HBuilderP/hjl/components/share-poster/index.vue?932d","webpack:///D:/project/HBuilderP/hjl/components/share-poster/index.vue?c7f0","webpack:///D:/project/HBuilderP/hjl/components/share-poster/index.vue?5332","webpack:///D:/project/HBuilderP/hjl/components/share-poster/index.vue?b4fd","webpack:///D:/project/HBuilderP/hjl/components/share-poster/index.vue","webpack:///D:/project/HBuilderP/hjl/components/share-poster/index.vue?272b","webpack:///D:/project/HBuilderP/hjl/components/share-poster/index.vue?f04f"],"names":["props","CanvasID","type","String","default","cWidth","Number","avatar","userName","time","desc","Type","imgSrc","Array","QrSrc","data","canvasW","canvasH","ctx","methods","generatePoster","uni","showLoading","title","initCanvas","createCanvasContext","canvasWidth","upx2px","line","Math","floor","length","canvasPadding","contentWidth","cHeight","strlineWidth","setFillStyle","fillRect","drwaUserInfo","drawDesc","drawSightImg","drawQrCode","avatarWidth","getImageInfo","imgPath","drawCircleImg","setFontSize","fillText","x","y","r","src","save","beginPath","arc","PI","clip","drawImage","restore","strLastIndex","strLineWidth","num","i","wordWidth","measureText","width","substring","console","log","imgWidth","marginBottom","marginRight","index","font","draw","ret","hideLoading","getNewImage","Promise","resolve","reject","success","image","path","fail","err","canvasToTempFilePath","canvasId","quality","complete","res","tempFilePath","$emit"],"mappings":"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","file":"components/share-poster/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=81faeae8&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"project/HBuilderP/hjl/components/share-poster/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=81faeae8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: {\n\t\tCanvasID:{\t\t// canvas-id\n\t\t\ttype:String,\n\t\t\tdefault:'sharePoster'\n\t\t},\n\t\tcWidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 750\n\t\t},\n\t\tavatar: {  //用户头像\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tuserName: {  //用户名\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\ttime: {\t\t\t//发布时间\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tdesc:{\t\t\t//文本描述\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\timgSrc:{\t\t//展示图列表\n\t\t\ttype: Array,\n\t\t\tdefault:()=>[]\n\t\t},\n\t\tQrSrc:{\t\t\t//二维码地址\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanvasW: 0,  //canvas宽度\n\t\t\tcanvasH: 0,\t//canvas高度\n\t\t\tctx:null\n\t\t}\n\t},\n\tmethods: {\n\t\tasync generatePoster() {\n\t\t\tuni.showLoading({\n\t\t\t    title: '生成海报中'\n\t\t\t});\n\t\t\tawait this.initCanvas()\n\t\t},\n\t\tasync initCanvas() {\n\t\t\tthis.ctx = uni.createCanvasContext(this.CanvasID,this) //创建canvas绘图上下文\n\t\t\tthis.canvasWidth = uni.upx2px(this.cWidth) //canvas宽度\n\t\t\tthis.canvasW = this.canvasWidth\n\t\t\tconst line = Math.floor(this.imgSrc.length/3)\n\t\t\tthis.canvasH = uni.upx2px(800)+uni.upx2px(215)*line\n\t\t\tthis.canvasPadding = uni.upx2px(30); //canvas Paddng 间距\n\t\t\tthis.contentWidth = this.canvasWidth - this.canvasPadding*2\n\t\t\tthis.cHeight = uni.upx2px(60)  //绘制内容距顶部高度\n\t\t\tlet strlineWidth = 0; //文本宽度\n\t\t\tthis.ctx.setFillStyle('#FFFFFF'); //canvas背景颜色\n\t\t\tthis.ctx.fillRect(0, 0, this.canvasWidth, this.canvasH); //canvas画布大小\n\t\t\tawait this.drwaUserInfo()\n\t\t\tawait this.drawDesc()\n\t\t\tawait this.drawSightImg()\n\t\t\tawait this.drawQrCode()\n\t\t},\n\t\tasync drwaUserInfo() {\n\t\t\t//绘制圆形头像\n\t\t\tconst avatarWidth = uni.upx2px(86) //绘制头像的宽高\n\t\t\tconst imgPath = await this.getImageInfo(this.avatar) //先通过uni.getImageInfo获取图片缓存信息，直接使用this.avatar绘制无效\n\t\t\tthis.drawCircleImg(this.canvasPadding,this.canvasPadding,avatarWidth/2, imgPath)\n\n\t\t\tthis.ctx.setFontSize(uni.upx2px(28));//设置标题字体大小\n\t\t\t// this.ctx.font=`normal bold ${parseInt(uni.upx2px(28))}px sans-serif`//设置标题字体大小 //真机上设置加粗后无法再变细\n\t\t\tthis.ctx.setFillStyle('#333333'); //设置标题文本颜色\n\t\t\tthis.ctx.fillText(this.userName, this.canvasPadding + avatarWidth + 10, this.cHeight+8)\n\n\t\t\t// this.ctx.font=`normal normal ${parseInt(uni.upx2px(22))}px sans-serif`\n\t\t\tthis.ctx.setFontSize(uni.upx2px(22))\n\t\t\tthis.ctx.setFillStyle('#8e939c'); //设置标题文本颜色\n\t\t\tthis.ctx.fillText(this.time, this.canvasPadding + avatarWidth + 10, this.cHeight+23)\n\t\t\tthis.cHeight += avatarWidth +10\n\t\t},\n\t\tdrawCircleImg(x,y,r,src) {\n\t\t\tthis.ctx.save() // 先保存状态 已便于画完圆再用\n\t\t\tthis.ctx.beginPath() //开始绘制\n\t\t\t//先画个圆   前两个参数确定了圆心 （x,y） 坐标  第三个参数是圆的半径  四参数是绘图方向  默认是false，即顺时针\n\t\t\tthis.ctx.arc(r+x, r+y , r, 0, Math.PI * 2, false)\n\t\t\tthis.ctx.clip();//画好了圆 剪切  原始画布中剪切任意形状和尺寸。一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内 这也是我们要save上下文的原因\n\t\t\t// 推进去图片，必须是https图片\n\t\t\tthis.ctx.drawImage(src, x, y, 2*r, 2*r);\n\t\t\tthis.ctx.restore(); //恢复之前保存的绘图上下文 恢复之前保存的绘图上下午即状态 还可以继续绘制\n\t\t},\n\t\t//设置文本描述\n\t\tasync drawDesc() {\n\t\t\tthis.ctx.setFontSize(uni.upx2px(26)); //设置标题字体大小\n\t\t\tthis.ctx.setFillStyle('#333333'); //设置标题文本颜色\n\t\t\tlet strLastIndex = 0; //每次开始截取的字符串的索引\n\t\t\tlet strLineWidth = 0\t//单行文本宽度\n\t\t\tlet num=1; //文本行数\n\t\t\tfor (let i = 0; i < this.desc.length; i++) {\n\t\t\t\tconst wordWidth = this.ctx.measureText(this.desc[i]).width\n\t\t\t\tif (i == this.desc.length - 1) {\n\t\t\t\t\tthis.ctx.fillText(this.desc.substring(strLastIndex, i + 1), this.canvasPadding, this.cHeight);\n\t\t\t\t\tstrLineWidth = 0;\n\t\t\t\t} else {\n\t\t\t\t\tif (strLineWidth + wordWidth >= this.contentWidth) {\n\t\t\t\t\t\tif (num == 3) {\n\t\t\t\t\t\t\t//超过3行进行省略号处理\n\t\t\t\t\t\t\tthis.ctx.fillText(this.desc.substring(strLastIndex, i-3)+'...', this.canvasPadding, this.cHeight);\n\t\t\t\t\t\t\tstrLineWidth = 0;\n\t\t\t\t\t\t\tstrLastIndex = i;\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(strLineWidth + wordWidth, 123465789,this.contentWidth)\n\t\t\t\t\t\t\tthis.ctx.fillText(this.desc.substring(strLastIndex, i), this.canvasPadding, this.cHeight);\n\t\t\t\t\t\t\tstrLineWidth = 0;\n\t\t\t\t\t\t\tthis.cHeight += 20;\n\t\t\t\t\t\t\tstrLastIndex = i;\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstrLineWidth += wordWidth\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t//绘制风景图片\n\t\tasync drawSightImg() {\n\t\t\tthis.cHeight += 10;\n\t\t\tconst imgWidth = uni.upx2px(215)\n\t\t\tlet width = 0, \n\t\t\tline = 1,\n\t\t\tmarginBottom = uni.upx2px(20)\n\t\t\tfor (let i = 0; i < this.imgSrc.length; i++) {\n\t\t\t\tline = Math.floor(i/3)+1  //012 345 678 \n\t\t\t\tconsole.log(line, 8888)\n\t\t\t\tlet marginRight = uni.upx2px(20), x, y\n\t\t\t\t/* if (i ===0 || i=== this.imgSrc.length-1) {\n\t\t\t\t\tmarginRight = 0\n\t\t\t\t} else {\n\t\t\t\t\tmarginRight = uni.upx2px(20)\n\t\t\t\t} */\n\t\t\t\tif (width + imgWidth > this.contentWidth) {\n\t\t\t\t\tx = this.canvasPadding\n\t\t\t\t\twidth = 0\n\t\t\t\t} else {\n\t\t\t\t\tconst index = i-(line-1)*3\n\t\t\t\t\tconsole.log(index, i,999)\n\t\t\t\t\tx = this.canvasPadding + imgWidth*index + marginRight*index\n\t\t\t\t\twidth+=x\n\t\t\t\t}\n\t\t\t\ty = this.cHeight + (line-1)*imgWidth + (line-1)*marginBottom\n\t\t\t\tconst src = await this.getImageInfo(this.imgSrc[i])\n\t\t\t\tthis.ctx.drawImage(src, x, y, imgWidth, imgWidth);\n\t\t\t}\n\t\t\tthis.cHeight += line*imgWidth + line*marginBottom\n\t\t},\n\t\tasync drawQrCode() {\n\t\t\tconst imgWidth = uni.upx2px(180)\n\t\t\tconst x = (this.canvasWidth - imgWidth)/2\n\t\t\tconsole.log(this.cHeight, '---cHeight')\n\t\t\tconst y = this.cHeight\n\t\t\tconst src = await this.getImageInfo(this.QrSrc)\n\t\t\t//TODO\n\t\t\tthis.drawCircleImg(x,y,imgWidth/2, this.QrSrc)\n\t\t\tthis.ctx.font=`normal normal ${uni.upx2px(24)}px serial`\n\t\t\tthis.ctx.setFillStyle('#8e939c'); //设置标题文本颜色\n\t\t\tthis.ctx.fillText('长按可识别小程序码', uni.upx2px(270), this.cHeight+imgWidth+uni.upx2px(30));\n\t\t\tthis.ctx.draw(true,(ret)=>{\n\t\t\t\tuni.hideLoading();\n\t\t\t\tthis.getNewImage()\n\t\t\t});\n\t\t},\n\t\t//获取图片信息\n\t\tasync getImageInfo(imgSrc) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tuni.getImageInfo({\n\t\t\t\t\tsrc: imgSrc,\n\t\t\t\t\tsuccess: function(image) {\n\t\t\t\t\t\tresolve(image.path);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t//将画布内容导出为图片\n\t\tgetNewImage(){\n\t\t\tconsole.log(1324657777,this.CanvasID)\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tcanvasId: this.CanvasID,\n\t\t\t\tquality: 1,\n\t\t\t\tfail() {\n\t\t\t\t\tconsole.log('fail')\n\t\t\t\t},\n\t\t\t\tcomplete: (res) => {\n\t\t\t\t\tconsole.log(res.tempFilePath);\n\t\t\t\t\tthis.$emit('success',res.tempFilePath);\n\t\t\t\t}\n\t\t\t},this);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1589938494188\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}